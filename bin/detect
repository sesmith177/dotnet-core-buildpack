#!/usr/bin/env bash

set -eu

BUILD_DIR=$1

proj_dirs=$(find "$BUILD_DIR" -type f -name '*.??proj' | xargs -n1 dirname)
for dir in $proj_dirs; do
  if [ -n "$(find -E "$dir" -type f -regex '.*\.(cs|fs)')" ]; then
    echo ".NET Core buildpack"
  fi
done

runtime_config=$(ls "$BUILD_DIR/*.runtimeconfig.json")
if [ -f "$runtime_config" ]; then
  echo ".NET Core buildpack"
fi

exit 1
